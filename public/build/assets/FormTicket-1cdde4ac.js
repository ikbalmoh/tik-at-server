import{r as c,R as h,W as G,j as l,y as U}from"./app-9a3eb5d1.js";import{T as j,I as T}from"./TextInput-bda422b1.js";import{I as N}from"./InputLabel-2bbc551d.js";import{I as P,b as J,a as K,c as W,p as Y,r as q,o as _,M as X}from"./Modal-49464967.js";import{P as Z}from"./PrimaryButton-314d0bb0.js";import{c as z}from"./cls-ac679db6.js";import{l as k,o as b,D as F,y as L,X as w,p as Q,R as V}from"./transition-2a8a2b15.js";import"./createReactComponent-0771bbff.js";function $(r){var a;if(r.type)return r.type;let e=(a=r.as)!=null?a:"button";if(typeof e=="string"&&e.toLowerCase()==="button")return"button"}function ee(r,a){let[e,t]=c.useState(()=>$(r));return k(()=>{t($(r))},[r.type,r.as]),k(()=>{e||a.current&&a.current instanceof HTMLButtonElement&&!a.current.hasAttribute("type")&&t("button")},[e,a]),e}function te(r){var a,e;let t=(a=r==null?void 0:r.form)!=null?a:r.closest("form");if(t){for(let n of t.elements)if(n!==r&&(n.tagName==="INPUT"&&n.type==="submit"||n.tagName==="BUTTON"&&n.type==="submit"||n.nodeName==="INPUT"&&n.type==="image")){n.click();return}(e=t.requestSubmit)==null||e.call(t)}}function re(r,a,e){let[t,n]=c.useState(e),s=r!==void 0,i=c.useRef(s),u=c.useRef(!1),o=c.useRef(!1);return s&&!i.current&&!u.current?(u.current=!0,i.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&i.current&&!o.current&&(o.current=!0,i.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?r:t,b(f=>(s||n(f),a==null?void 0:a(f)))]}let D=c.createContext(null);function R(){let r=c.useContext(D);if(r===null){let a=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,R),a}return r}function ae(){let[r,a]=c.useState([]);return[r.length>0?r.join(" "):void 0,c.useMemo(()=>function(e){let t=b(s=>(a(i=>[...i,s]),()=>a(i=>{let u=i.slice(),o=u.indexOf(s);return o!==-1&&u.splice(o,1),u}))),n=c.useMemo(()=>({register:t,slot:e.slot,name:e.name,props:e.props}),[t,e.slot,e.name,e.props]);return h.createElement(D.Provider,{value:n},e.children)},[a])]}let le="label";function ne(r,a){let e=P(),{id:t=`headlessui-label-${e}`,passive:n=!1,...s}=r,i=R(),u=L(a);k(()=>i.register(t),[t,i.register]);let o={ref:u,...i.props,id:t};return n&&("onClick"in o&&(delete o.htmlFor,delete o.onClick),"onClick"in s&&delete s.onClick),w({ourProps:o,theirProps:s,slot:i.slot||{},defaultTag:le,name:i.name||"Label"})}let se=F(ne),ie=Object.assign(se,{}),S=c.createContext(null);S.displayName="GroupContext";let oe=c.Fragment;function ce(r){var a;let[e,t]=c.useState(null),[n,s]=ae(),[i,u]=K(),o=c.useMemo(()=>({switch:e,setSwitch:t,labelledby:n,describedby:i}),[e,t,n,i]),f={},x=r;return h.createElement(u,{name:"Switch.Description"},h.createElement(s,{name:"Switch.Label",props:{htmlFor:(a=o.switch)==null?void 0:a.id,onClick(d){e&&(d.currentTarget.tagName==="LABEL"&&d.preventDefault(),e.click(),e.focus({preventScroll:!0}))}}},h.createElement(S.Provider,{value:o},w({ourProps:f,theirProps:x,defaultTag:oe,name:"Switch.Group"}))))}let ue="button";function me(r,a){let e=P(),{id:t=`headlessui-switch-${e}`,checked:n,defaultChecked:s=!1,onChange:i,name:u,value:o,form:f,...x}=r,d=c.useContext(S),g=c.useRef(null),p=L(g,a,d===null?null:d.setSwitch),[v,y]=re(n,i,s),E=b(()=>y==null?void 0:y(!v)),H=b(m=>{if(q(m.currentTarget))return m.preventDefault();m.preventDefault(),E()}),I=b(m=>{m.key===_.Space?(m.preventDefault(),E()):m.key===_.Enter&&te(m.currentTarget)}),M=b(m=>m.preventDefault()),A=c.useMemo(()=>({checked:v}),[v]),O={id:t,ref:p,role:"switch",type:ee(r,g),tabIndex:0,"aria-checked":v,"aria-labelledby":d==null?void 0:d.labelledby,"aria-describedby":d==null?void 0:d.describedby,onClick:H,onKeyUp:I,onKeyPress:M},B=Q();return c.useEffect(()=>{var m;let C=(m=g.current)==null?void 0:m.closest("form");C&&s!==void 0&&B.addEventListener(C,"reset",()=>{y(s)})},[g,y]),h.createElement(h.Fragment,null,u!=null&&v&&h.createElement(W,{features:Y.Hidden,...V({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:f,checked:v,name:u,value:o})}),w({ourProps:O,theirProps:x,slot:A,defaultTag:ue,name:"Switch"}))}let de=F(me),pe=ce,fe=Object.assign(de,{Group:pe,Label:ie,Description:J});function Te({visible:r,onClose:a,ticket:e}){const{data:t,setData:n,post:s,put:i,processing:u,errors:o,reset:f,clearErrors:x}=G(e);c.useEffect(()=>{e?n(e):(f(),x())},[r]);const d=()=>{a(),U.reload({only:["tickets"]})},g=p=>{p.preventDefault(),e?i(route("ticket.update",{id:e.id}),{onSuccess:()=>d()}):s(route("ticket.store"),{onSuccess:()=>d()})};return l.jsx(X,{title:e?"Edit Jenis Tiket":"Tambah Jenis Tiket Baru",show:r,maxWidth:"md",onClose:()=>a(),children:l.jsxs("form",{onSubmit:g,children:[l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(N,{htmlFor:"name",value:"Nama Tiket",className:"w-2/5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx(j,{id:"name",type:"text",name:"name",value:t.name,className:z("mt-1 block w-full",t.id<=3?"bg-gray-100 text-gray-500":""),isFocused:!t.id,placeholder:"Nama Tiket",onChange:p=>n("name",p.target.value),readOnly:t.id<=3}),l.jsx(T,{message:o.name,className:"mt-2"})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(N,{htmlFor:"regular_price",value:"Harga Tiket Reguler",className:"w-2/5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx(j,{id:"regular_price",type:"number",name:"regular_price",value:t.regular_price,className:"mt-1 block w-full",placeholder:"Harga Tiket",isFocused:t.id!=null,onChange:p=>n("regular_price",parseFloat(p.target.value))}),l.jsx(T,{message:o.regular_price,className:"mt-2"})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(N,{htmlFor:"holiday_price",value:"Harga Hari Libur",className:"w-2/5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx(j,{id:"holiday_price",type:"number",name:"holiday_price",value:t.holiday_price,className:"mt-1 block w-full",placeholder:"Harga Hari Libur",onChange:p=>n("holiday_price",parseFloat(p.target.value))}),l.jsx(T,{message:o.holiday_price,className:"mt-2"})]})]}),l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsx(N,{htmlFor:"is_active",value:"Tiket Aktif",className:"w-2/5"}),l.jsx("div",{className:"flex-1",children:l.jsxs(fe,{name:"is_active",checked:t==null?void 0:t.is_active,onChange:p=>n("is_active",p),className:`${t!=null&&t.is_active?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full`,children:[l.jsx("span",{className:"sr-only",children:"Tiket Aktif"}),l.jsx("span",{className:`${t!=null&&t.is_active?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition`})]})})]})]}),l.jsx("div",{className:"flex items-center justify-end mt-8",children:l.jsx(Z,{className:"ms-4",disabled:u,children:e!=null&&e.id?"Simpan Perubahan":"Simpan"})})]})})}export{Te as default};
